#!/bin/bash

# Script to check if AzureHound is installed and install it if not present

# Function to display the logo
display_logo() {
  echo "===================================="
  echo "         4SECUREIT.PL               "
  echo "===================================="
  echo "   Cybersecurity & IT Solutions     "
  echo "===================================="
  echo
}

# Function to check if AzureHound is installed
check_azurehound() {
    if command -v AzureHound &> /dev/null; then
        echo "AzureHound is already installed."
    else
        echo "AzureHound is not installed."
        install_azurehound
    fi
}

# Function to install AzureHound
install_azurehound() {
    read -p "Do you want to install AzureHound? (y/n): " choice
    if [[ "$choice" == "y" || "$choice" == "Y" ]]; then
        echo "Installing AzureHound..."

        # Installing prerequisites (Assumes you have dotnet and other dependencies)
        echo "Installing dependencies..."
        sudo apt update
        sudo apt install -y git dotnet-sdk-6.0

        # Cloning AzureHound repository
        git clone https://github.com/BloodHoundAD/AzureHound.git /opt/pentestcloud/azurehound

        # Navigating to AzureHound directory and building
        cd /opt/pentestcloud/azurehound
        dotnet build

        # Creating symbolic link to make AzureHound globally accessible
        sudo ln -s /opt/pentestcloud/azurehound/bin/Debug/net6.0/AzureHound /usr/local/bin/AzureHound

        echo "AzureHound installation complete!"
    else
        echo "Installation canceled. AzureHound not installed."
    fi
}

# Main script execution
display_logo
check_azurehound
