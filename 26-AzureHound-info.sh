#!/bin/bash

# Script to run AzureHound with user input and save output to a JSON file

# Function to display the logo
display_logo() {
  echo "===================================="
  echo "         4SECUREIT.PL               "
  echo "===================================="
  echo "   Cybersecurity & IT Solutions     "
  echo "===================================="
  echo
}

# Function to get user input and run AzureHound
run_azurehound() {
    read -p "Enter username (e.g., user@example.com): " USERNAME
    read -s -p "Enter password: " PASSWORD
    echo
    read -p "Enter tenant ID: " TENANT_ID

    # Check if the output directory exists, if not create it
    OUTPUT_DIR="./26"
    if [ ! -d "$OUTPUT_DIR" ]; then
        mkdir -p "$OUTPUT_DIR"
    fi

    # Run AzureHound command
    /opt/pentestcloud/azurehound/azurehound -u "$USERNAME" -p "$PASSWORD" list --tenant "$TENANT_ID" -o "$OUTPUT_DIR/output.json"

    echo "Output saved to $OUTPUT_DIR/output.json"
}

# Main script execution
display_logo
run_azurehound
