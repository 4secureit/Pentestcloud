#!/bin/bash

# Function to display the logo
display_logo() {
  echo "======================================"
  echo "         4SECUREIT.PL                 "
  echo "======================================"
  echo "Cybersecurity & IT Solutions - by : WILAN"
  echo
}

# Function to display the menu
display_menu() {
  echo
  echo "Select the action to perform for the domain:"
  echo "======================================"
  echo
  echo "0. Check if domain is Managed in Azure"
  echo "1. Perform DNS and DIG check on domain"
  echo "2. Retrieve Tenant ID for the domain"
  echo "3. Enumerate Azure services for subdomains"
  echo "4. Check if Office 365 user exists"
  echo "5. Generate login list from name and domain"
  echo "6. Check if any user from the list exists"
  echo
  echo "q. Quit"
  echo "======================================"
  echo
}

# Function to run the selected script
run_script() {
  case $1 in
    0)
      ./0-check_domain_azure.sh "$DOMAIN"
      ;;
    1)
      ./1-check_azure_domain.sh "$DOMAIN"
      ;;
    2)
      ./2-check-tenant-id.sh "$DOMAIN"
      ;;
    3)
      ./3-enum-subdomain.sh "$DOMAIN"
      ;;
    4)
      read -p "Enter the email address to check: " EMAIL
      ./4-check-o365-user.sh "$EMAIL"
      ;;
    5)
      read -p "Enter first name: " FIRST_NAME
      read -p "Enter last name: " LAST_NAME
      read -p "Enter domain: " DOMAIN
      ./5-generate_logins.sh "$FIRST_NAME" "$LAST_NAME" "$DOMAIN"
      ;;
    6)
      ./6-check_users_list.sh "$DOMAIN"
      ;;
    q)
      echo "Quitting..."
      exit 0
      ;;
    *)
      echo "Invalid option. Please select a valid option."
      ;;
  esac
}

# Check if a domain argument is provided
if [ -z "$1" ]; then
  echo "Usage: $0 <domain>"
  exit 1
fi

# Domain provided by the user
DOMAIN=$1

# Display the logo
display_logo

# Display the menu
display_menu

# Read user choice
read -p "Enter your choice: " CHOICE

# Run the selected script
run_script $CHOICE
