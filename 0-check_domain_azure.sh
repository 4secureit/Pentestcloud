#!/bin/bash

# Check if a domain was provided
if [ -z "$1" ]; then
  echo "Usage: $0 [domain]"
  exit 1
fi

DOMAIN=$1

# Send a request to the API
RESPONSE=$(curl -s "https://login.microsoftonline.com/getuserrealm.srf?login=$DOMAIN&xml=1")

# Check if the domain is managed
if echo "$RESPONSE" | grep -q "<NameSpaceType>Managed</NameSpaceType>"; then
  echo "The domain $DOMAIN is managed in Azure (Managed)."
else
  echo "The domain $DOMAIN is NOT managed in Azure."
fi
